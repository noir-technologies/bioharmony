# BioHarmony - AI-Powered Plant Monitoring System

## 🚀 Project Overview

**BioHarmony** is an intelligent plant monitoring system that combines IoT sensors, artificial intelligence, and musical feedback to create a unique and engaging plant care experience. The system monitors soil moisture, ambient temperature, and humidity, then generates personalized AI melodies and messages based on plant health conditions.

## 🎯 Key Features

- **🌱 Real-time Plant Monitoring**: Continuous monitoring of soil moisture, temperature, and humidity
- **🤖 AI-Powered Melody Generation**: Unique musical patterns generated by Gemini AI based on plant conditions
- **📱 Smart Display Interface**: 16x2 LCD display showing plant status and ambient conditions
- **🔊 Musical Feedback**: Buzzer alerts and AI-generated melodies for different plant states
- **🌐 Web API**: FastAPI-based REST API for remote monitoring and AI integration
- **⚡ Modular Architecture**: Clean, maintainable Python codebase with separate modules for each component

## 🏗️ System Architecture

### Core Components

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Sensors       │    │   AI Engine     │    │   Output        │
│                 │    │                 │    │                 │
│ • Soil Moisture │───▶│ • Gemini AI     │───▶│ • LCD Display   │
│ • DHT11 (T/H)  │    │ • Melody Gen    │    │ • Buzzer Alerts │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         └───────────────────────┼───────────────────────┘
                                 │
                    ┌─────────────────┐
                    │   Plant Monitor │
                    │   (Main Logic)  │
                    └─────────────────┘
```

### Technology Stack

- **Backend**: Python 3.8+
- **Web Framework**: FastAPI + Uvicorn
- **AI Integration**: Google Gemini AI API
- **Hardware Interface**: CircuitPython libraries
- **Display**: I2C LCD with PCF8574 interface
- **Sensors**: Capacitive soil moisture sensor, DHT11 temperature/humidity sensor

## 📁 Project Structure

```
bioharmony/
├── main.py                 # FastAPI web server for AI integration
├── code.py                 # Main plant monitoring application
├── config.py               # Configuration and pin assignments
├── requirements.txt        # Python dependencies
├── .gitignore             # Git ignore rules
├── ai/                    # AI integration modules
│   └── melody_generator.py # Gemini AI melody generation
├── sensors/               # Sensor interface modules
│   ├── humidity_sensor.py # Soil moisture sensor
│   └── dht_ambient_sensor.py # DHT11 temperature/humidity
├── display/               # Display interface modules
│   └── lcd_display.py    # LCD display management
├── alerts/                # Audio feedback modules
│   └── buzzer_alerts.py  # Buzzer control and melodies
├── utils/                 # Utility modules
│   └── soil_analyzer.py  # Plant health analysis
└── lib/                   # External libraries
    ├── adafruit_bus_device/ # I2C/SPI communication
    └── lcd/               # LCD interface libraries
```

## 🔧 Hardware Requirements

### Microcontroller
- **Primary**: Raspberry Pi Pico W or similar CircuitPython-compatible board
- **Alternative**: ESP32 with CircuitPython support

### Sensors
- **Soil Moisture**: Capacitive soil moisture sensor (analog)
- **Ambient Conditions**: DHT11 temperature and humidity sensor
- **Display**: 16x2 I2C LCD with PCF8574 interface
- **Audio**: Piezo buzzer for musical feedback

### Pin Assignments
```python
SOIL_HUMIDITY_SENSOR_PIN = "IO33"    # Analog input
AMBIENT_SENSOR_PIN = "IO18"          # Digital (DHT11)
BUZZER_PIN = "IO26"                  # PWM output
LCD_I2C_ADDRESS = 0x27              # I2C address
```

## 🚀 Quick Start

### 1. Install Dependencies
```bash
pip install -r requirements.txt
```

### 2. Configure Environment
Create a `.env` file or set environment variables:
```bash
export GEMINI_API_KEY="your_gemini_api_key_here"
```

### 3. Run the Plant Monitor
```bash
# Start the main plant monitoring system
python code.py

# Start the AI web API server (optional)
python main.py
```

### 4. Access the Web API
- **Health Check**: `GET /health`
- **AI Melody Generation**: `POST /consulta`
- **Root**: `GET /`

## 🤖 AI Integration

### Gemini AI Melody Generation
The system uses Google's Gemini AI to generate unique musical patterns based on:
- Soil moisture levels
- Ambient temperature and humidity
- Plant type and location
- Current plant health status

### AI Response Format
```
MESSAGE: [encouraging message - max 16 chars]
MELODY: [note,duration,note,duration,note,duration]
```

### Musical Notes
- **Range**: C3 to C6 (3 octaves)
- **Rests**: R for silence
- **Duration**: In seconds (0.5, 1.0, etc.)

## 📊 Plant Health Analysis

### Soil Moisture Levels
- **Dry**: Above 26,000 (needs watering)
- **Normal**: 20,000 - 26,000 (healthy)
- **Humid**: Below 20,000 (overwatered)

### Ambient Conditions
- **Temperature**: 18°C - 30°C (optimal range)
- **Humidity**: 40% - 75% (optimal range)

### Health Status Categories
- **Good**: Optimal conditions
- **Needs Water**: Dry soil detected
- **Too Wet**: Overwatered
- **Dry Air**: Low humidity
- **Humid Air**: High humidity
- **Temperature Stress**: Temperature outside optimal range

## 🔌 API Endpoints

### Plant Health Consultation
```http
POST /consulta
Content-Type: application/json

{
  "location": "indoor",
  "plant_type": "houseplant",
  "soil_moisture": 25000,
  "temperature": 22.5,
  "humidity": 65.0
}
```

### Response Format
```json
{
  "respuesta": "MESSAGE: Plant is happy!\nMELODY: C4,0.5,D4,0.5,E4,1.0"
}
```

## 🛠️ Development

### Adding New Sensors
1. Create a new sensor class in `sensors/`
2. Implement the required interface methods
3. Add configuration in `config.py`
4. Integrate with `PlantMonitor` class

### Customizing AI Responses
1. Modify the prompt template in `main.py`
2. Adjust generation parameters for creativity
3. Add new plant types or conditions

### Extending Display Features
1. Add new display methods in `LCDDisplay` class
2. Implement custom message formatting
3. Add status indicators or icons

## 🚨 Troubleshooting

### Common Issues
- **Sensor Connection Errors**: Check pin assignments and wiring
- **AI API Failures**: Verify API key and internet connection
- **Display Issues**: Check I2C address and connections
- **Audio Problems**: Verify buzzer pin and PWM configuration

### Debug Mode
Enable verbose logging by setting debug flags in `config.py`:
```python
DEBUG_MODE = True
VERBOSE_LOGGING = True
```

## 📝 Configuration

### Threshold Adjustments
Modify sensor thresholds in `config.py`:
```python
SOIL_HUMIDITY_THRESHOLDS = {
    'dry': 26000,      # Adjust based on your sensor
    'normal': 20000    # and soil type
}
```

### Timing Settings
```python
MAIN_LOOP_DELAY = 6.0      # Seconds between readings
AI_REQUEST_INTERVAL = 30   # Seconds between AI requests
```

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests if applicable
5. Submit a pull request

## 📄 License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## 👥 Team

- **[Thomas Bermúdez Mora](https://www.linkedin.com/in/thomas-bermudez-mora/)** - Quality Leader & Developer
- **[Franklin Castro Rodriguez](https://www.linkedin.com/in/franklin-castro-rodriguez/)** - Logistics Leader & Developer  
- **[Gabriel Lobo Ulloa](https://www.linkedin.com/in/glovooker/)** - Technical Leader & Developer

## 🔮 Future Enhancements

- **Machine Learning**: Local plant health prediction models
- **Cloud Integration**: Remote monitoring and data analytics
- **Mobile App**: Companion app for plant care tracking
- **Multi-Plant Support**: Monitor multiple plants simultaneously
- **Weather Integration**: Local weather data for outdoor plants
- **Social Features**: Share plant care achievements and tips

---

**BioHarmony** - Where technology meets nature, creating harmony through intelligent plant care. 🌱🎵🤖

